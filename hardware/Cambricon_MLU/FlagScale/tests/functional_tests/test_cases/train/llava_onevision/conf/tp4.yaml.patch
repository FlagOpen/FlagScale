diff --git a/tests/functional_tests/test_cases/train/llava_onevision/conf/tp4.yaml b/tests/functional_tests/test_cases/train/llava_onevision/conf/tp4.yaml
index 97bcc182..5b340f19 100644
--- a/tests/functional_tests/test_cases/train/llava_onevision/conf/tp4.yaml
+++ b/tests/functional_tests/test_cases/train/llava_onevision/conf/tp4.yaml
@@ -14,13 +14,13 @@ experiment:
     ssh_port: null
   shell_cmds: null
   cmds:
-    before_start: cp -r ./megatron-energon/src/megatron/energon ./megatron/megatron && source /root/miniconda3/bin/activate flagscale-train
+    before_start: cp -r ./third_party/Megatron-Energon/src/megatron/energon ./third_party/Megatron-LM/megatron && source /root/miniconda3/bin/activate flagscale-train
   envs:
     HYDRA_FULL_ERROR: 1
     CUDA_VISIBLE_DEVICES: "0,1,2,3,4,5,6,7"
     CUDA_DEVICE_MAX_CONNECTIONS: 1
     CUBLAS_WORKSPACE_CONFIG: ":4096:8"
-    NCCL_ALGO: "Tree"
+    NCCL_ALGO: "Ring"
     NVTE_APPLY_QK_LAYER_SCALING: 0
     NVTE_ALLOW_NONDETERMINISTIC_ALGO: 0
     NVTE_FLASH_ATTN: 0

