megatron:
  set_environment: 
    cd megatron; export PYTHONPATH=..:$PYTHONPATH;export NVTE_FLASH_ATTN=0;export NVTE_FUSED_ATTN=0;
  coverage:
    core
  subset:
    # Use default configuration if not shown
    dist_checkpointing:
      ignore: 
        - models/test_mamba.py
      deselect:
        - test_fully_parallel.py::TestFullyParallelSaveAndLoad::test_memory_usage
    models:
      ignore: test_mamba_model.py
    transformer/moe:
      type: single 
      ignore: test_upcycling.py
    transformer:
      depth: 1 
    ./:
      depth: 1 
      ignore: test_utilities.py

flagscale:
  set_environment: 
      export PYTHONPATH=./megatron:$PYTHONPATH;export NVTE_FLASH_ATTN=0;export NVTE_FUSED_ATTN=0;
  subset:
    runner:
      type: batch 
      depth: all 
    ./:
      depth: 1 